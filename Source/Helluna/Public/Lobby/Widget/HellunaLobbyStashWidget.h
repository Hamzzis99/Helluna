// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HellunaLobbyStashWidget.h
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//
// ë¡œë¹„ ë©”ì¸ ë“€ì–¼ ìœ„ì ¯ â€” Stash + Loadout ì–‘ìª½ íŒ¨ë„ + ì¶œê²© ë²„íŠ¼
//
// ğŸ“Œ ë ˆì´ì•„ì›ƒ:
//    â”Œâ”€â”€â”€ Stash Panel â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€ Loadout Panel â”€â”€â”€â”€â”
//    â”‚ [ì¥ë¹„][ì†Œëª¨í’ˆ][ì¬ë£Œ]  â”‚  â”‚ [ì¥ë¹„][ì†Œëª¨í’ˆ][ì¬ë£Œ]  â”‚
//    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
//    â”‚ â”‚                  â”‚ â”‚  â”‚ â”‚                  â”‚ â”‚
//    â”‚ â”‚   Grid (íƒ­ë³„)    â”‚ â”‚  â”‚ â”‚   Grid (íƒ­ë³„)    â”‚ â”‚
//    â”‚ â”‚                  â”‚ â”‚  â”‚ â”‚                  â”‚ â”‚
//    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
//    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//                        [ ì¶œê²© ë²„íŠ¼ ]
//
// ğŸ“Œ ì•„ì´í…œ ì „ì†¡:
//    1ì°¨: ë²„íŠ¼ ì „ì†¡ (ìš°í´ë¦­ â†’ "Loadoutìœ¼ë¡œ ë³´ë‚´ê¸°" / "Stashë¡œ ë³´ë‚´ê¸°")
//    2ì°¨: ë“œë˜ê·¸ì•¤ë“œë¡­ í¬ë¡œìŠ¤ íŒ¨ë„ (Phase 4-5)
//
// ì‘ì„±ì: Gihyeon (Claude Code ë³´ì¡°)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

#pragma once

#include "CoreMinimal.h"
#include "Blueprint/UserWidget.h"
#include "HellunaLobbyStashWidget.generated.h"

// ì „ë°© ì„ ì–¸
class UHellunaLobbyPanel;
class UInv_InventoryComponent;
class UInv_InventoryItem;
class UButton;
class AHellunaLobbyController;

UCLASS()
class HELLUNA_API UHellunaLobbyStashWidget : public UUserWidget
{
	GENERATED_BODY()

public:
	virtual void NativeOnInitialized() override;

	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	// ì´ˆê¸°í™”
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

	/**
	 * ì–‘ìª½ íŒ¨ë„ì„ ê°ê°ì˜ InvCompì™€ ë°”ì¸ë”©
	 *
	 * @param StashComp    Stash InventoryComponent
	 * @param LoadoutComp  Loadout InventoryComponent
	 */
	UFUNCTION(BlueprintCallable, Category = "ë¡œë¹„|Stashìœ„ì ¯",
		meta = (DisplayName = "íŒ¨ë„ ì´ˆê¸°í™”"))
	void InitializePanels(UInv_InventoryComponent* StashComp, UInv_InventoryComponent* LoadoutComp);

	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	// ì•„ì´í…œ ì „ì†¡ (1ì°¨: ë²„íŠ¼ ê¸°ë°˜)
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

	/**
	 * Stash â†’ Loadout ì•„ì´í…œ ì „ì†¡
	 * Server RPCë¥¼ í†µí•´ ì„œë²„ì—ì„œ ì‹¤í–‰
	 *
	 * @param ItemEntryIndex  ì „ì†¡í•  ì•„ì´í…œì˜ Entry ì¸ë±ìŠ¤
	 *
	 * TODO: [DragDrop] ì¶”í›„ ë“œë˜ê·¸ì•¤ë“œë¡­ í¬ë¡œìŠ¤ íŒ¨ë„ êµ¬í˜„ ì‹œ ì—¬ê¸°ì— ì—°ê²°
	 */
	UFUNCTION(BlueprintCallable, Category = "ë¡œë¹„|Stashìœ„ì ¯",
		meta = (DisplayName = "Loadoutìœ¼ë¡œ ì•„ì´í…œ ì „ì†¡"))
	void TransferItemToLoadout(int32 ItemEntryIndex);

	/**
	 * Loadout â†’ Stash ì•„ì´í…œ ì „ì†¡
	 * Server RPCë¥¼ í†µí•´ ì„œë²„ì—ì„œ ì‹¤í–‰
	 *
	 * @param ItemEntryIndex  ì „ì†¡í•  ì•„ì´í…œì˜ Entry ì¸ë±ìŠ¤
	 *
	 * TODO: [DragDrop] ì¶”í›„ ë“œë˜ê·¸ì•¤ë“œë¡­ í¬ë¡œìŠ¤ íŒ¨ë„ êµ¬í˜„ ì‹œ ì—¬ê¸°ì— ì—°ê²°
	 */
	UFUNCTION(BlueprintCallable, Category = "ë¡œë¹„|Stashìœ„ì ¯",
		meta = (DisplayName = "Stashë¡œ ì•„ì´í…œ ì „ì†¡"))
	void TransferItemToStash(int32 ItemEntryIndex);

	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	// íŒ¨ë„ ì ‘ê·¼
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

	UFUNCTION(BlueprintCallable, BlueprintPure, Category = "ë¡œë¹„|Stashìœ„ì ¯")
	UHellunaLobbyPanel* GetStashPanel() const { return StashPanel; }

	UFUNCTION(BlueprintCallable, BlueprintPure, Category = "ë¡œë¹„|Stashìœ„ì ¯")
	UHellunaLobbyPanel* GetLoadoutPanel() const { return LoadoutPanel; }

protected:
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	// BindWidget â€” BPì—ì„œ ì—°ê²°
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

	/** Stash íŒ¨ë„ (ì¢Œì¸¡) */
	UPROPERTY(meta = (BindWidget))
	TObjectPtr<UHellunaLobbyPanel> StashPanel;

	/** Loadout íŒ¨ë„ (ìš°ì¸¡) */
	UPROPERTY(meta = (BindWidget))
	TObjectPtr<UHellunaLobbyPanel> LoadoutPanel;

	/** ì¶œê²© ë²„íŠ¼ (í•˜ë‹¨) */
	UPROPERTY(meta = (BindWidget))
	TObjectPtr<UButton> Button_Deploy;

private:
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	// ì¶œê²© ë²„íŠ¼ ì½œë°±
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

	UFUNCTION()
	void OnDeployClicked();

	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	// ë‚´ë¶€ í—¬í¼
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

	/** í˜„ì¬ LobbyController ê°€ì ¸ì˜¤ê¸° */
	AHellunaLobbyController* GetLobbyController() const;

	// ë°”ì¸ë”©ëœ ì»´í¬ë„ŒíŠ¸ ìºì‹œ
	TWeakObjectPtr<UInv_InventoryComponent> CachedStashComp;
	TWeakObjectPtr<UInv_InventoryComponent> CachedLoadoutComp;
};
